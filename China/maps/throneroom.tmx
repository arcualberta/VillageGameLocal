<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" tiledversion="1.0.3" orientation="orthogonal" renderorder="left-down" width="19" height="28" tilewidth="30" tileheight="30" nextobjectid="24">
 <tileset firstgid="1" source="throneroom.tsx"/>
 <tileset firstgid="443" source="throneobjects.tsx"/>
 <tileset firstgid="452" source="village_tiles.tsx"/>
 <tileset firstgid="1098" source="throne.tsx"/>
 <tileset firstgid="1099" name="Villager Placeholder" tilewidth="30" tileheight="50" tilecount="12" columns="3">
  <image source="../sprites/villager1.png" width="90" height="200"/>
  <tile id="6">
   <properties>
    <property name="NPC" value="Wukong"/>
   </properties>
  </tile>
 </tileset>
 <layer name="lower" width="19" height="28">
  <data encoding="csv">
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,
491,491,28,29,30,0,0,0,0,0,0,0,0,0,40,41,42,491,491,
491,491,54,55,56,0,0,0,0,0,0,0,0,0,66,67,68,491,491,
491,491,80,81,82,0,0,0,0,0,0,0,0,0,92,93,94,491,491,
908,908,106,107,108,0,0,0,0,0,0,0,0,0,118,119,120,908,908,
928,928,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,928,928,
928,928,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,928,928,
928,928,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,928,928,
928,928,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,928,928,
928,928,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,928,928,
928,928,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,928,928,
928,928,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,928,928,
928,928,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,928,928,
928,928,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,928,928,
928,928,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,928,928,
928,928,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,928,928,
928,928,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,928,928
</data>
 </layer>
 <layer name="throne_lower" width="19" height="28" opacity="0.45">
  <data encoding="csv">
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,96,97,98,99,100,101,102,103,104,0,0,0,253,253,
253,253,0,0,0,122,123,124,125,126,127,128,129,130,0,0,0,253,253,
253,253,0,0,0,148,149,150,151,152,153,154,155,156,0,0,0,253,253,
253,253,0,0,0,174,175,176,177,178,179,180,181,182,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253,
253,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,253
</data>
 </layer>
 <layer name="middle" width="19" height="28">
  <data encoding="csv">
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,254,255,256,257,258,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,280,281,282,283,284,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,306,307,308,309,310,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,0,
0,27,0,0,0,491,491,491,491,491,491,491,491,491,0,0,0,43,0,
0,53,0,0,0,491,491,491,491,491,491,491,491,491,0,0,0,69,0,
0,79,0,0,0,491,491,491,491,491,491,491,491,491,0,0,0,95,0,
0,105,0,0,0,908,908,908,908,908,908,908,908,908,0,0,0,121,0,
794,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,0,
0,157,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,173,0,
0,183,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,199,0,
0,209,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,225,0,
0,235,0,0,0,0,229,0,0,0,0,0,229,0,0,0,0,251,0,
944,261,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,277,0,
963,287,0,0,330,0,0,0,0,0,0,0,0,0,330,0,0,303,0,
0,313,0,0,356,0,0,0,0,0,0,0,0,0,356,0,0,329,0,
0,339,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,355,0,
0,365,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,381,0,
0,391,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,407,981,
0,417,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,433,1000
</data>
 </layer>
 <layer name="throne_layer" width="19" height="28" opacity="0.44">
  <data encoding="csv">
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,253,253,253,253,253,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,253,253,253,253,253,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,253,253,253,253,253,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,18,19,20,21,22,23,24,25,26,0,0,0,0,0,
0,0,0,0,0,44,45,46,47,48,49,50,51,52,0,0,0,0,0,
0,0,0,0,0,70,71,72,73,74,75,76,77,78,0,0,0,0,0,
253,0,0,0,0,96,0,0,0,0,0,0,0,104,0,0,0,0,0,
0,0,0,0,0,0,203,0,0,0,0,0,203,0,0,0,0,0,0,
0,0,0,0,0,0,229,0,0,0,0,0,229,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253
</data>
 </layer>
 <objectgroup name="objects">
  <object id="3" name="InteractTest" type="VillageObject" gid="443" x="80" y="476" width="20" height="20.6667">
   <properties>
    <property name="oninteract" value="world.getObject(&quot;ThroneEvent&quot;).removeThrone(this, player, world, worldAdapter);"/>
    <property name="onstart" value="this.interactEnabled = true;"/>
   </properties>
  </object>
  <object id="4" name="ThroneEvent" type="VillageObject" gid="569" x="270" y="59" width="30" height="30" visible="0">
   <properties>
    <property name="onstart">
this.removeThrone = function(caller, player, world, worldAdapter){
	this.removeThrone = function(caller, player, world, worldAdapter){};
	world.getChild(&quot;throne_layer&quot;).drawEnabled = false;
	world.getChild(&quot;throne_lower&quot;).drawEnabled = false;
	world.objects.removeChild(&quot;Throne&quot;);
	game.display.camera.target = world.getObject(&quot;Emporer&quot;);
	world.getObject(&quot;Emporer&quot;).state = &quot;onleave&quot;;
}</property>
   </properties>
  </object>
  <object id="5" name="Lion_Bottom_Left" type="VillageObject" gid="692" x="194" y="521" width="30" height="30">
   <properties>
    <property name="walkable" type="bool" value="false"/>
   </properties>
  </object>
  <object id="7" name="Lion_Bottom_Right" gid="695" x="346" y="521" width="30" height="30">
   <properties>
    <property name="walkable" type="bool" value="false"/>
   </properties>
  </object>
  <object id="8" name="Right_Bottom_Left" type="VillageObject" gid="447" x="70" y="418" width="40" height="40"/>
  <object id="10" name="Light_Top_Left" type="VillageObject" gid="444" x="70" y="378" width="40" height="40"/>
  <object id="11" name="Right_Bottom_Left" type="VillageObject" gid="447" x="460" y="418" width="40" height="40"/>
  <object id="12" name="Right_Bottom_Left" type="VillageObject" gid="444" x="460" y="378" width="40" height="40"/>
  <object id="13" name="Throne" type="VillageObject" gid="1098" x="217" y="499" width="138" height="93"/>
  <object id="14" name="Lion_Top_Right" type="VillageObject" gid="676" x="346" y="491" width="30" height="30"/>
  <object id="15" name="Lion_Top_Left" type="VillageObject" gid="673" x="194" y="491" width="30" height="30"/>
  <object id="2" name="MainStart" type="PlayerStart" x="274" y="809.5" width="20" height="19"/>
  <object id="19" name="Chair2" type="VillageObject" gid="443" x="154" y="760" width="40" height="40">
   <properties>
    <property name="walkable" value="false"/>
   </properties>
  </object>
  <object id="21" name="Chair3" type="VillageObject" gid="443" x="154" y="856" width="40" height="40">
   <properties>
    <property name="walkable" value="false"/>
   </properties>
  </object>
  <object id="16" name="Chair1" type="VillageObject" gid="443" x="154" y="680" width="40" height="40">
   <properties>
    <property name="walkable" value="false"/>
   </properties>
  </object>
  <object id="20" name="Chair5" type="VillageObject" gid="443" x="375" y="760" width="40" height="40">
   <properties>
    <property name="walkable" value="false"/>
   </properties>
  </object>
  <object id="22" name="Chair6" type="VillageObject" gid="443" x="375" y="856" width="40" height="40">
   <properties>
    <property name="walkable" value="false"/>
   </properties>
  </object>
  <object id="18" name="Chair4" type="VillageObject" gid="443" x="375" y="680" width="40" height="40">
   <properties>
    <property name="walkable" value="false"/>
   </properties>
  </object>
  <object id="23" name="Emporer" type="NPC" gid="1099" x="270" y="540" width="30" height="50">
   <properties>
    <property name="ongoodbye">if(!this.lastStep[2]){
	this.stopCount++;
}

if(this.stopCount &gt; 1){
	this.drawable = false;
	game.display.camera.target = player.user;
}else{
	this.scale =  Math.max(0.03, Math.sqrt(Math.pow(this.location[4] - 564, 2) + Math.pow(this.location[5] - 182,  2)) / this.maxDist);
	this.speed = 0.08 * this.scale + 0.02;
	this.scale = Math.sqrt(this.scale);
}</property>
    <property name="onidle" value=""/>
    <property name="onleave">this.stopCount = 0;
this.waypoint[0] = 564;
this.waypoint[1] = 182;
this.state = &quot;ongoodbye&quot;;</property>
    <property name="onstart">this.state = &quot;onwait&quot;;
this.blockable = false;
this.stopCount = 0;
this.minimapColor = &quot;#FF0&quot;;
this.maxDist = Math.sqrt(Math.pow(this.location[4] - 564, 2) + Math.pow(this.location[5] - 182,  2));

this.scale = 1;

this.updateSize = function(width, height){
	var w = Math.floor(width * this.scale);
	var h = Math.floor(height * this.scale);
	
	ArcActor.prototype.updateSize.call(this, w, h);
};</property>
    <property name="onwait" value=""/>
    <property name="spritesheet" value="villager_1"/>
   </properties>
  </object>
 </objectgroup>
 <objectgroup name="triggers"/>
 <layer name="high" width="19" height="28" opacity="0.47">
  <data encoding="csv">
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,5,6,7,8,9,10,11,12,13,0,0,0,0,0,
0,0,0,0,0,31,32,33,34,35,36,37,38,39,0,0,0,0,0,
0,0,0,0,0,57,58,59,60,61,62,63,64,65,0,0,0,0,0,
0,0,0,0,0,83,0,0,0,0,0,0,0,91,0,0,0,0,0,
0,0,0,0,0,109,0,0,0,0,0,0,0,117,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,200,0,0,0,0,0,0,0,0,0,200,0,0,0,0,
0,0,0,0,226,0,0,0,0,0,0,0,0,0,226,0,0,0,0,
0,0,0,0,252,0,203,0,0,0,0,0,203,0,252,0,0,0,0,
0,0,0,0,278,0,0,0,0,0,0,0,0,0,278,0,0,0,0,
0,0,0,0,304,0,0,0,0,0,0,0,0,0,304,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,200,0,0,0,0,0,0,0,0,0,0,0,200,0,0,0,
0,0,0,226,0,0,0,0,0,0,0,0,0,0,0,226,0,0,0,
0,0,0,252,0,0,0,0,0,0,0,0,0,0,0,252,0,0,0,
0,0,0,278,0,0,0,0,0,0,0,0,0,0,0,278,0,0,0,
0,0,0,304,0,0,0,0,0,0,0,0,0,0,0,304,0,0,0
</data>
 </layer>
</map>
